# Modbus 地址与参数智能扫描工具

> 角色视角：工业产品经理（自动化 / 能源 / 楼控 / 工控软件）
> 产品目标：**解决“未知 Modbus 设备参数与地址”的工程现场问题**，打造一款专业、可信、跨平台的工程师工具。

---

## 一、产品背景与问题定义

### 1.1 真实业务场景

在工业现场接入第三方设备（电表、水表、空调、变频器、PLC 等）时，经常遇到以下问题：

* 无完整技术文档 / 文档错误
* 不清楚 Modbus 通讯参数
* 不知道 Slave ID、寄存器地址
* 原厂家或原工程师已不可联系

工程师通常只能：

* 反复试参数
* 用多个工具交叉验证
* 依赖个人经验

👉 **效率低、风险高、不可复用**。

---

### 1.2 核心痛点

| 痛点     | 具体表现                  |
| ------ | --------------------- |
| 参数未知   | RTU 波特率 / 校验位 / 停止位未知 |
| 地址未知   | 寄存器起始地址、功能码不明确        |
| 工具割裂   | TCP / RTU 需不同工具       |
| 误判风险   | 噪声、异常码、假响应            |
| 经验不可复制 | 老工程师“拍脑袋”             |

---

## 二、产品目标与定位

### 2.1 产品定位

> **面向工程现场的 Modbus 智能扫描与识别工具**

关键词：

* 工程级
* 可解释
* 不作妖
* 跨平台

---

### 2.2 产品目标

* **帮助工程师在最短时间内确定：**

  * 通讯方式（RTU / TCP）
  * 通讯参数
  * Slave ID
  * 可用寄存器地址

* 将“个人经验”转化为“工具能力”

* 降低调试风险，提升接入成功率

---

## 三、目标用户与使用场景

### 3.1 目标用户画像

| 用户类型     | 特征         |
| -------- | ---------- |
| 系统集成工程师  | 项目制、现场调试频繁 |
| 运维工程师    | 老系统维护、资料缺失 |
| 能源/楼控工程师 | 多品牌设备混用    |
| 自动化开发工程师 | 协议对接与二次开发  |

---

### 3.2 典型使用流程

1. 接入未知 Modbus 设备
2. 打开工具
3. 选择扫描模式（TCP / RTU）
4. 配置少量已知信息（如 IP / 串口）
5. 启动扫描
6. 查看可信结果
7. 导出点表 / 参数

---

## 四、产品整体功能架构

### 4.1 功能模块总览

* 设备连接模块
* 扫描策略引擎（核心）
* 通讯协议层
* 结果分析与可信度评估
* UI 展示与交互
* 数据导出与复用

---

## 五、核心功能设计（重点）

### 5.1 扫描模式设计

#### 5.1.1 Modbus TCP 扫描

**输入：**

* IP 地址 / IP 段
* 端口（默认 502，可扩展）

**扫描内容：**

* Slave ID（1–247）
* 功能码（01 / 02 / 03 / 04）
* 寄存器地址区间

---

#### 5.1.2 Modbus RTU 扫描

**输入：**

* 串口选择
* 可选参数范围：

  * 波特率
  * 校验位
  * 数据位
  * 停止位

**扫描策略：**

* 非全量暴力扫描
* 优先级策略（常见参数优先）
* 快速失败与跳过机制

---

### 5.2 智能扫描策略（产品差异化核心）

#### 5.2.1 参数优先级策略

* 内置“工业默认参数池”
* 厂家常用参数模板
* 用户自定义优先级

---

#### 5.2.2 快速失败机制

* CRC 错误快速淘汰
* 无响应阈值跳过
* 连续异常码判定

---

#### 5.2.3 可信度评分模型

对扫描结果进行评分：

* 响应一致性
* 多功能码验证
* 数据稳定性

输出：

* 高可信 / 中可信 / 低可信

---

### 5.3 扫描过程可视化

UI 实时展示：

* 当前扫描参数组合
* 已尝试 / 剩余组合数
* 实时日志（可读，不是 HEX）
* 可随时暂停 / 跳过

---

## 六、结果展示与数据复用

### 6.1 扫描结果视图

* 设备信息卡片
* 成功参数组合
* 可用寄存器列表
* 数据示例（实时读取）

---

## 七、交互与 UI 原型说明（文本级）

### 7.1 主界面布局

* 左侧：设备连接与扫描配置
* 中间：扫描进度与日志
* 右侧：结果与可信度

强调：

* 工程感
* 克制
* 信息密度适中

---

### 7.2 扫描配置页

* 基础模式（新手）
* 高级模式（工程师）

避免一次性暴露全部参数。

---

## 八、非功能性设计（工业级要求）

### 8.1 稳定性

* 防 UI 阻塞
* 扫描异常自动恢复
* 串口异常保护

---

### 8.2 安全性

* 扫描限速
* 避免写寄存器
* 默认只读

---

### 8.3 跨平台支持

* Windows / macOS / Linux（Debian）
* 单文件发布
* 无依赖环境
* C# + Avalonia
---
